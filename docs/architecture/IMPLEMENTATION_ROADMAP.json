{
  "roadmap_version": "1.2.0",
  "project": "maatify/admin-infra",
  "status": "READY_FOR_EXECUTION",
  "governed_by": "docs/architecture/ARCHITECTURE_INDEX.md",
  "last_update_reason": "Phase re-sequencing after Phase 4 execution lock and architecture consensus",
  "principles": [
    "Architecture before implementation",
    "Contracts before drivers",
    "Core before integrations",
    "No phase may violate locked architecture",
    "Side-effect systems must exist as contracts before use"
  ],
  "phases": [
    {
      "id": "phase0",
      "title": "Repository Bootstrap & Governance",
      "order": 0,
      "status": "COMPLETED",
      "scope": [
        "Repository structure",
        "Tooling",
        "Governance setup"
      ],
      "deliverables": [
        "Base src namespace",
        "Contracts directory",
        "PSR-12 configuration",
        "PHPUnit setup",
        "PHPStan (max level)",
        "CI skeleton"
      ],
      "constraints": [
        "No domain logic",
        "No drivers",
        "No persistence"
      ]
    },
    {
      "id": "phase1",
      "title": "Core Contracts (Foundational)",
      "order": 1,
      "status": "COMPLETED",
      "critical": true,
      "scope": [
        "Foundational interfaces",
        "Cross-cutting contracts"
      ],
      "deliverables": [
        "AuditLoggerInterface",
        "NotificationDispatcherInterface",
        "SystemSettingsReaderInterface",
        "ExecutionContext contracts",
        "All DTO contracts"
      ],
      "constraints": [
        "No implementations",
        "No external dependencies",
        "No storage drivers"
      ]
    },
    {
      "id": "phase2",
      "title": "Repository Contracts & Core Boundaries",
      "order": 2,
      "status": "COMPLETED",
      "scope": [
        "Query / Command repositories",
        "Failure & exception model finalization"
      ],
      "deliverables": [
        "Repository interfaces",
        "Result DTO semantics",
        "NotFound handling"
      ],
      "constraints": [
        "No implementations",
        "No orchestration logic"
      ]
    },
    {
      "id": "phase3",
      "title": "Orchestration Design & Planning",
      "order": 3,
      "status": "COMPLETED",
      "scope": [
        "Orchestrator responsibilities",
        "Execution boundaries"
      ],
      "deliverables": [
        "Orchestration skeletons",
        "Non-responsibility definitions"
      ],
      "constraints": [
        "No execution logic",
        "No side effects"
      ]
    },
    {
      "id": "phase4",
      "title": "Orchestration Execution Logic",
      "order": 4,
      "status": "LOCKED",
      "scope": [
        "Execution sequencing",
        "Read-before-write enforcement",
        "Audit & notification intents"
      ],
      "deliverables": [
        "All orchestrators implemented",
        "Result DTO semantics enforced",
        "LogicException used as architectural locks",
        "Full unit test coverage",
        "PHPStan Level MAX clean"
      ],
      "constraints": [
        "No contract changes",
        "No infrastructure",
        "No business logic"
      ]
    },
    {
      "id": "phase5",
      "title": "Authorization Engine",
      "order": 5,
      "status": "COMPLETED",
      "scope": [
        "Permission registry",
        "Role-permission mapping",
        "Central can() resolver"
      ],
      "deliverables": [
        "Authorization resolver",
        "Deterministic permission decisions",
        "Audit hooks for allow/deny"
      ],
      "constraints": [
        "No implicit permissions",
        "No super-admin bypass",
        "No orchestration logic duplication"
      ]
    },
    {
      "id": "phase6",
      "title": "TOTP / MFA",
      "order": 6,
      "status": "COMPLETED",
      "scope": [
        "Internal TOTP lifecycle"
      ],
      "deliverables": [
        "RFC 6238 compliant TOTP logic",
        "Enroll / verify / revoke flows",
        "SystemSettings integration",
        "Audit intents"
      ],
      "constraints": [
        "No external MFA",
        "No SMS fallback",
        "No infrastructure drivers"
      ]
    },
    {
      "id": "phase7",
      "title": "Sessions & Device Security",
      "order": 7,
      "status": "PENDING",
      "scope": [
        "Session lifecycle",
        "Device awareness",
        "Impersonation"
      ],
      "deliverables": [
        "Session manager",
        "Revocation rules",
        "Impersonation guard",
        "Security notifications via interfaces"
      ],
      "constraints": [
        "No silent renew",
        "No local-only storage assumptions"
      ]
    },
    {
      "id": "phase8",
      "title": "Audit & Activity (Implementation)",
      "order": 8,
      "status": "PENDING",
      "scope": [
        "Concrete audit drivers"
      ],
      "deliverables": [
        "Mongo audit driver",
        "Null audit driver"
      ],
      "constraints": [
        "No blocking behavior",
        "No business logic dependency"
      ]
    },
    {
      "id": "phase9",
      "title": "Notifications (Implementation)",
      "order": 9,
      "status": "PENDING",
      "scope": [
        "Concrete notification channels"
      ],
      "deliverables": [
        "Email channel",
        "Telegram channel",
        "Dispatcher implementation"
      ],
      "constraints": [
        "No inbound commands",
        "No authentication via notifications"
      ]
    },
    {
      "id": "phase10",
      "title": "System Settings (Implementation)",
      "order": 10,
      "status": "PENDING",
      "scope": [
        "Settings persistence",
        "Feature flags"
      ]
    },
    {
      "id": "phase11",
      "title": "Observability",
      "order": 11,
      "status": "PENDING",
      "scope": [
        "Logs",
        "Metrics",
        "Health checks"
      ]
    },
    {
      "id": "phase12",
      "title": "Testing & Hardening",
      "order": 12,
      "status": "PENDING",
      "scope": [
        "Security hardening",
        "Regression suites"
      ]
    },
    {
      "id": "phase13",
      "title": "Packaging & Release",
      "order": 13,
      "status": "PENDING",
      "scope": [
        "v1.0.0 release"
      ]
    }
  ]
}
